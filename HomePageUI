import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.SimpleDateFormat;
import java.util.Date;

public class InventoryManagementSystem extends JFrame {
    private Inventory inventory;
    private JPanel mainPanel;
    private CardLayout cardLayout;
    
    // Home page components
    private JLabel totalItemsLabel;
    private JLabel lowStockLabel;
    private JLabel totalValueLabel;
    private JLabel currentDateLabel;

    public InventoryManagementSystem() {
        inventory = new Inventory();
        initializeUI();
        setupSampleData();
        refreshHomePage();
    }

    private void initializeUI() {
        setTitle("Inventory Management System");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(1000, 700);
        setLocationRelativeTo(null);

        // Main layout using CardLayout for multiple pages
        cardLayout = new CardLayout();
        mainPanel = new JPanel(cardLayout);

        // Create different pages
        mainPanel.add(createHomePage(), "HOME");
        mainPanel.add(createInventoryPage(), "INVENTORY");
        mainPanel.add(createSettingsPage(), "SETTINGS");

        // Navigation panel
        JPanel navPanel = createNavigationPanel();
        
        // Main container
        setLayout(new BorderLayout());
        add(navPanel, BorderLayout.NORTH);
        add(mainPanel, BorderLayout.CENTER);
    }

    private JPanel createNavigationPanel() {
        JPanel navPanel = new JPanel(new FlowLayout(FlowLayout.LEFT));
        navPanel.setBackground(new Color(70, 130, 180));
        navPanel.setPreferredSize(new Dimension(1000, 60));
        navPanel.setBorder(new EmptyBorder(10, 20, 10, 20));

        JLabel titleLabel = new JLabel("Inventory Management System");
        titleLabel.setFont(new Font("Arial", Font.BOLD, 20));
        titleLabel.setForeground(Color.WHITE);

        JButton homeBtn = createNavButton("Home", "HOME");
        JButton inventoryBtn = createNavButton("Inventory", "INVENTORY");
        JButton settingsBtn = createNavButton("Settings", "SETTINGS");

        navPanel.add(titleLabel);
        navPanel.add(Box.createHorizontalStrut(50));
        navPanel.add(homeBtn);
        navPanel.add(inventoryBtn);
        navPanel.add(settingsBtn);

        return navPanel;
    }

    private JButton createNavButton(String text, String page) {
        JButton button = new JButton(text);
        button.setFont(new Font("Arial", Font.PLAIN, 14));
        button.setBackground(new Color(100, 150, 200));
        button.setForeground(Color.WHITE);
        button.setFocusPainted(false);
        button.setBorder(BorderFactory.createEmptyBorder(8, 15, 8, 15));

        button.addActionListener(e -> cardLayout.show(mainPanel, page));

        return button;
    }

    private JPanel createHomePage() {
        JPanel homePanel = new JPanel(new BorderLayout());
        homePanel.setBackground(new Color(240, 245, 249));
        homePanel.setBorder(new EmptyBorder(30, 30, 30, 30));

        // Header
        JLabel headerLabel = new JLabel("Dashboard Overview", JLabel.CENTER);
        headerLabel.setFont(new Font("Arial", Font.BOLD, 28));
        headerLabel.setForeground(new Color(70, 130, 180));
        headerLabel.setBorder(new EmptyBorder(0, 0, 30, 0));

        // Metrics panel
        JPanel metricsPanel = createMetricsPanel();

        // Quick actions panel
        JPanel actionsPanel = createQuickActionsPanel();

        homePanel.add(headerLabel, BorderLayout.NORTH);
        homePanel.add(metricsPanel, BorderLayout.CENTER);
        homePanel.add(actionsPanel, BorderLayout.SOUTH);

        return homePanel;
    }

    private JPanel createMetricsPanel() {
        JPanel metricsPanel = new JPanel(new GridLayout(2, 2, 20, 20));
        metricsPanel.setBackground(new Color(240, 245, 249));

        // Total Items Card
        JPanel totalItemsCard = createMetricCard("Total Items", "0", 
            new Color(41, 128, 185), "items_icon.png");
        totalItemsLabel = (JLabel) ((JPanel) totalItemsCard.getComponent(1)).getComponent(0);

        // Low Stock Items Card
        JPanel lowStockCard = createMetricCard("Low Stock Items", "0", 
            new Color(231, 76, 60), "warning_icon.png");
        lowStockLabel = (JLabel) ((JPanel) lowStockCard.getComponent(1)).getComponent(0);

        // Total Stock Value Card
        JPanel totalValueCard = createMetricCard("Total Stock Value", "$0.00", 
            new Color(39, 174, 96), "money_icon.png");
        totalValueLabel = (JLabel) ((JPanel) totalValueCard.getComponent(1)).getComponent(0);

        // Current Date Card
        JPanel dateCard = createMetricCard("Current Date", getCurrentDate(), 
            new Color(155, 89, 182), "calendar_icon.png");
        currentDateLabel = (JLabel) ((JPanel) dateCard.getComponent(1)).getComponent(0);

        metricsPanel.add(totalItemsCard);
        metricsPanel.add(lowStockCard);
        metricsPanel.add(totalValueCard);
        metricsPanel.add(dateCard);

        return metricsPanel;
    }

    private JPanel createMetricCard(String title, String value, Color color, String iconPath) {
        JPanel card = new JPanel(new BorderLayout());
        card.setBackground(Color.WHITE);
        card.setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(new Color(200, 200, 200), 1),
            new EmptyBorder(20, 20, 20, 20)
        ));

        // Title
        JLabel titleLabel = new JLabel(title);
        titleLabel.setFont(new Font("Arial", Font.PLAIN, 16));
        titleLabel.setForeground(new Color(100, 100, 100));

        // Value
        JLabel valueLabel = new JLabel(value, JLabel.CENTER);
        valueLabel.setFont(new Font("Arial", Font.BOLD, 24));
        valueLabel.setForeground(color);

        JPanel valuePanel = new JPanel(new BorderLayout());
        valuePanel.setBackground(Color.WHITE);
        valuePanel.add(valueLabel, BorderLayout.CENTER);

        card.add(titleLabel, BorderLayout.NORTH);
        card.add(valuePanel, BorderLayout.CENTER);

        return card;
    }

    private JPanel createQuickActionsPanel() {
        JPanel actionsPanel = new JPanel(new FlowLayout());
        actionsPanel.setBackground(new Color(240, 245, 249));
        actionsPanel.setBorder(new EmptyBorder(30, 0, 0, 0));

        JButton refreshBtn = createActionButton("Refresh Data", new Color(41, 128, 185));
        JButton viewInventoryBtn = createActionButton("View Inventory", new Color(39, 174, 96));
        JButton addItemBtn = createActionButton("Add New Item", new Color(155, 89, 182));

        refreshBtn.addActionListener(e -> refreshHomePage());
        viewInventoryBtn.addActionListener(e -> cardLayout.show(mainPanel, "INVENTORY"));
        addItemBtn.addActionListener(e -> showAddItemDialog());

        actionsPanel.add(refreshBtn);
        actionsPanel.add(viewInventoryBtn);
        actionsPanel.add(addItemBtn);

        return actionsPanel;
    }

    private JButton createActionButton(String text, Color color) {
        JButton button = new JButton(text);
        button.setFont(new Font("Arial", Font.BOLD, 14));
        button.setBackground(color);
        button.setForeground(Color.WHITE);
        button.setFocusPainted(false);
        button.setBorder(BorderFactory.createEmptyBorder(12, 25, 12, 25));
        button.setCursor(new Cursor(Cursor.HAND_CURSOR));

        return button;
    }

    private void refreshHomePage() {
        // Update metrics
        totalItemsLabel.setText(String.valueOf(inventory.getTotalItems()));
        lowStockLabel.setText(String.valueOf(inventory.getLowStockCount()));
        totalValueLabel.setText(String.format("$%.2f", inventory.getTotalStockValue()));
        currentDateLabel.setText(getCurrentDate());
    }

    private String getCurrentDate() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("EEE, MMM dd, yyyy");
        return dateFormat.format(new Date());
    }

    private void setupSampleData() {
        // Add some sample inventory items
        inventory.addItem(new InventoryItem("Laptop", 999.99, 10, "Electronics"));
        inventory.addItem(new InventoryItem("Mouse", 25.50, 3, "Electronics"));
        inventory.addItem(new InventoryItem("Notebook", 5.99, 50, "Stationery"));
        inventory.addItem(new InventoryItem("Pen", 1.99, 2, "Stationery"));
        inventory.addItem(new InventoryItem("Desk Lamp", 35.75, 8, "Furniture"));
    }

    private void showAddItemDialog() {
        // Simplified add item dialog
        JTextField nameField = new JTextField();
        JTextField priceField = new JTextField();
        JTextField quantityField = new JTextField();
        JTextField categoryField = new JTextField();

        Object[] message = {
            "Name:", nameField,
            "Price:", priceField,
            "Quantity:", quantityField,
            "Category:", categoryField
        };

        int option = JOptionPane.showConfirmDialog(this, message, "Add New Item", 
            JOptionPane.OK_CANCEL_OPTION);
        
        if (option == JOptionPane.OK_OPTION) {
            try {
                String name = nameField.getText();
                double price = Double.parseDouble(priceField.getText());
                int quantity = Integer.parseInt(quantityField.getText());
                String category = categoryField.getText();

                if (!name.isEmpty() && !category.isEmpty()) {
                    inventory.addItem(new InventoryItem(name, price, quantity, category));
                    refreshHomePage();
                    JOptionPane.showMessageDialog(this, "Item added successfully!");
                }
            } catch (NumberFormatException ex) {
                JOptionPane.showMessageDialog(this, "Please enter valid numbers for price and quantity.");
            }
        }
    }

    // Placeholder methods for other pages
    private JPanel createInventoryPage() {
        JPanel panel = new JPanel(new BorderLayout());
        panel.add(new JLabel("Inventory Page - Under Development", JLabel.CENTER), BorderLayout.CENTER);
        
        JButton backBtn = new JButton("Back to Home");
        backBtn.addActionListener(e -> cardLayout.show(mainPanel, "HOME"));
        panel.add(backBtn, BorderLayout.SOUTH);
        
        return panel;
    }

    private JPanel createSettingsPage() {
        JPanel panel = new JPanel(new BorderLayout());
        panel.add(new JLabel("Settings Page - Under Development", JLabel.CENTER), BorderLayout.CENTER);
        
        JButton backBtn = new JButton("Back to Home");
        backBtn.addActionListener(e -> cardLayout.show(mainPanel, "HOME"));
        panel.add(backBtn, BorderLayout.SOUTH);
        
        return panel;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(() -> {
            try {
                UIManager.setLookAndFeel(UIManager.getSystemLookAndFeel());
            } catch (Exception e) {
                e.printStackTrace();
            }
            new InventoryManagementSystem().setVisible(true);
        });
    }
}

// Inventory Item class demonstrating Encapsulation
class InventoryItem {
    private String name;
    private double price;
    private int quantity;
    private String category;
    private Date dateAdded;

    public InventoryItem(String name, double price, int quantity, String category) {
        this.name = name;
        this.price = price;
        this.quantity = quantity;
        this.category = category;
        this.dateAdded = new Date();
    }

    // Getters and setters (Encapsulation)
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }

    public double getPrice() { return price; }
    public void setPrice(double price) { this.price = price; }

    public int getQuantity() { return quantity; }
    public void setQuantity(int quantity) { this.quantity = quantity; }

    public String getCategory() { return category; }
    public void setCategory(String category) { this.category = category; }

    public Date getDateAdded() { return dateAdded; }

    public double getTotalValue() {
        return price * quantity;
    }

    public boolean isLowStock() {
        return quantity <= 5;
    }
}

// Inventory management class
class Inventory {
    private java.util.List<InventoryItem> items;

    public Inventory() {
        items = new java.util.ArrayList<>();
    }

    public void addItem(InventoryItem item) {
        items.add(item);
    }

    public int getTotalItems() {
        return items.size();
    }

    public int getLowStockCount() {
        return (int) items.stream().filter(InventoryItem::isLowStock).count();
    }

    public double getTotalStockValue() {
        return items.stream().mapToDouble(InventoryItem::getTotalValue).sum();
    }

    public java.util.List<InventoryItem> getItems() {
        return new java.util.ArrayList<>(items);
    }
}
